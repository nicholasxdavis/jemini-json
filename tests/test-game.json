{
  "project_name": "Rainbow Jelly Flap",
  "files": [
    {
      "filename": "index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">\n    <title>Rainbow Jelly Flap</title>\n    <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n    <div id=\"game-container\">\n        <canvas id=\"gameCanvas\"></canvas>\n        <div id=\"ui-layer\">\n            <div id=\"score-display\">0</div>\n            <div id=\"start-screen\" class=\"screen active\">\n                <h1>Rainbow Jelly<br>Flap</h1>\n                <p>Tap, Click, or Spacebar to Jump</p>\n                <button id=\"start-btn\" class=\"pulse-btn\">PLAY</button>\n            </div>\n            <div id=\"game-over-screen\" class=\"screen\">\n                <h2>SPLAT!</h2>\n                <p>Score: <span id=\"final-score\">0</span></p>\n                <p>Best: <span id=\"best-score\">0</span></p>\n                <button id=\"restart-btn\" class=\"pulse-btn\">RETRY</button>\n            </div>\n        </div>\n    </div>\n    <script src=\"script.js\"></script>\n</body>\n</html>"
    },
    {
      "filename": "style.css",
      "content": "@import url('https://fonts.googleapis.com/css2?family=Fredoka+One&display=swap');\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    user-select: none;\n    -webkit-user-select: none;\n}\n\nbody {\n    overflow: hidden;\n    background: #222;\n    font-family: 'Fredoka One', cursive;\n}\n\n#game-container {\n    position: relative;\n    width: 100vw;\n    height: 100vh;\n    overflow: hidden;\n}\n\ncanvas {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n\n#ui-layer {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n}\n\n#score-display {\n    position: absolute;\n    top: 10%;\n    width: 100%;\n    text-align: center;\n    font-size: 4rem;\n    color: white;\n    text-shadow: 3px 3px 0px rgba(0,0,0,0.3);\n    z-index: 10;\n    opacity: 0.8;\n}\n\n.screen {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.4);\n    backdrop-filter: blur(5px);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    opacity: 0;\n    transition: opacity 0.3s;\n    pointer-events: auto;\n    visibility: hidden;\n}\n\n.screen.active {\n    opacity: 1;\n    visibility: visible;\n}\n\nh1 {\n    font-size: 3.5rem;\n    color: #fff;\n    text-align: center;\n    line-height: 1.1;\n    margin-bottom: 1rem;\n    text-shadow: 0 4px 10px rgba(0,0,0,0.3);\n    transform: rotate(-3deg);\n    animation: float 2s ease-in-out infinite;\n}\n\nh2 {\n    font-size: 4rem;\n    color: #ff4757;\n    margin-bottom: 0.5rem;\n    text-shadow: 3px 3px 0 #fff;\n}\n\np {\n    color: white;\n    font-size: 1.5rem;\n    margin-bottom: 2rem;\n    text-shadow: 1px 1px 2px black;\n}\n\nbutton {\n    background: linear-gradient(45deg, #FF00CC, #3333FF);\n    border: none;\n    padding: 1rem 3rem;\n    font-size: 1.5rem;\n    color: white;\n    border-radius: 50px;\n    font-family: inherit;\n    cursor: pointer;\n    box-shadow: 0 4px 15px rgba(0,0,0,0.3);\n    transition: transform 0.1s;\n    outline: none;\n}\n\nbutton:active {\n    transform: scale(0.95);\n}\n\n.pulse-btn {\n    animation: pulse 1.5s infinite;\n}\n\n@keyframes float {\n    0%, 100% { transform: translateY(0) rotate(-3deg); }\n    50% { transform: translateY(-10px) rotate(3deg); }\n}\n\n@keyframes pulse {\n    0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }\n    70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); }\n    100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }\n}"
    },
    {
      "filename": "script.js",
      "content": "const canvas = document.getElementById('gameCanvas');\nconst ctx = canvas.getContext('2d');\n\n// Game State\nlet gameState = 'START'; // START, PLAYING, GAMEOVER\nlet frames = 0;\nlet score = 0;\nlet highScore = localStorage.getItem('jellyHighScore') || 0;\nlet gameSpeed = 3;\nlet globalHue = 0;\n\n// Audio Context (Synthesized sounds)\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\nconst audioCtx = new AudioContext();\n\nfunction playSound(type) {\n    if (audioCtx.state === 'suspended') audioCtx.resume();\n    const osc = audioCtx.createOscillator();\n    const gainNode = audioCtx.createGain();\n    osc.connect(gainNode);\n    gainNode.connect(audioCtx.destination);\n\n    if (type === 'jump') {\n        osc.type = 'sine';\n        osc.frequency.setValueAtTime(300, audioCtx.currentTime);\n        osc.frequency.exponentialRampToValueAtTime(600, audioCtx.currentTime + 0.1);\n        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);\n        osc.start();\n        osc.stop(audioCtx.currentTime + 0.1);\n    } else if (type === 'score') {\n        osc.type = 'triangle';\n        osc.frequency.setValueAtTime(600, audioCtx.currentTime);\n        osc.frequency.setValueAtTime(800, audioCtx.currentTime + 0.1);\n        gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);\n        gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);\n        osc.start();\n        osc.stop(audioCtx.currentTime + 0.2);\n    } else if (type === 'die') {\n        osc.type = 'sawtooth';\n        osc.frequency.setValueAtTime(200, audioCtx.currentTime);\n        osc.frequency.exponentialRampToValueAtTime(50, audioCtx.currentTime + 0.3);\n        gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);\n        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);\n        osc.start();\n        osc.stop(audioCtx.currentTime + 0.3);\n    }\n}\n\n// Resize Handling\nfunction resize() {\n    canvas.width = window.innerWidth;\n    canvas.height = window.innerHeight;\n}\nwindow.addEventListener('resize', resize);\nresize();\n\n// Entity: Jelly Player\nconst player = {\n    x: 100,\n    y: 0,\n    radius: 20,\n    velocity: 0,\n    gravity: 0.25,\n    jumpStrength: -6.5,\n    rotation: 0,\n    \n    reset: function() {\n        this.y = canvas.height / 2;\n        this.velocity = 0;\n        this.rotation = 0;\n    },\n\n    draw: function() {\n        ctx.save();\n        ctx.translate(this.x, this.y);\n        \n        // Jelly Physics: Squash and Stretch\n        // Stretch vertically when moving up, squash when falling\n        let stretch = 1 + (this.velocity * 0.05);\n        // Clamp stretching\n        stretch = Math.max(0.7, Math.min(1.3, stretch));\n        let squash = 1 / stretch;\n        \n        ctx.scale(squash, stretch);\n        \n        // Rotate slightly based on velocity\n        this.rotation += this.velocity * 0.02;\n        ctx.rotate(this.rotation * 0.1);\n\n        // Rainbow Color\n        ctx.fillStyle = `hsl(${globalHue}, 100%, 60%)`;\n        ctx.shadowColor = `hsl(${globalHue}, 100%, 40%)`;\n        ctx.shadowBlur = 15;\n        \n        // Draw Body\n        ctx.beginPath();\n        ctx.roundRect(-this.radius, -this.radius, this.radius * 2, this.radius * 2, 10);\n        ctx.fill();\n        \n        // Draw Eye\n        ctx.fillStyle = 'white';\n        ctx.beginPath();\n        ctx.arc(6, -6, 8, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.fillStyle = 'black';\n        ctx.beginPath();\n        ctx.arc(8, -6, 3, 0, Math.PI * 2);\n        ctx.fill();\n\n        ctx.restore();\n    },\n\n    update: function() {\n        this.velocity += this.gravity;\n        this.y += this.velocity;\n\n        // Floor Collision\n        if (this.y + this.radius >= canvas.height) {\n            this.y = canvas.height - this.radius;\n            gameOver();\n        }\n    },\n\n    jump: function() {\n        this.velocity = this.jumpStrength;\n        createParticles(this.x, this.y + this.radius, 10);\n        playSound('jump');\n    }\n};\n\n// Entity: Obstacles (Pipes)\nconst obstacles = {\n    list: [],\n    gap: 180,\n    width: 60,\n    timer: 0,\n\n    reset: function() {\n        this.list = [];\n        this.timer = 0;\n    },\n\n    update: function() {\n        // Spawn logic\n        if (frames % 100 === 0) {\n            // Procedural Height\n            const minHeight = 50;\n            const maxHeight = canvas.height - this.gap - minHeight;\n            const topHeight = Math.floor(Math.random() * (maxHeight - minHeight + 1) + minHeight);\n            \n            this.list.push({\n                x: canvas.width,\n                topHeight: topHeight,\n                passed: false,\n                hue: (globalHue + 180) % 360 // Complementary color\n            });\n        }\n\n        // Move & Collision\n        for (let i = 0; i < this.list.length; i++) {\n            let ob = this.list[i];\n            ob.x -= gameSpeed;\n\n            // Collision Detection (AABB)\n            // Top Pipe\n            if (player.x + player.radius > ob.x && \n                player.x - player.radius < ob.x + this.width && \n                player.y - player.radius < ob.topHeight) {\n                gameOver();\n            }\n            // Bottom Pipe\n            if (player.x + player.radius > ob.x && \n                player.x - player.radius < ob.x + this.width && \n                player.y + player.radius > ob.topHeight + this.gap) {\n                gameOver();\n            }\n\n            // Score counting\n            if (ob.x + this.width < player.x && !ob.passed) {\n                score++;\n                ob.passed = true;\n                document.getElementById('score-display').innerText = score;\n                playSound('score');\n                // Speed up slightly\n                if(score % 5 === 0) gameSpeed += 0.2;\n            }\n\n            // Removal\n            if (ob.x + this.width < 0) {\n                this.list.shift();\n                i--;\n            }\n        }\n    },\n\n    draw: function() {\n        for (let ob of this.list) {\n            ctx.fillStyle = `hsl(${ob.hue}, 60%, 20%)`;\n            ctx.strokeStyle = `hsl(${ob.hue}, 80%, 60%)`;\n            ctx.lineWidth = 4;\n\n            // Top Pipe\n            ctx.beginPath();\n            ctx.roundRect(ob.x, 0, this.width, ob.topHeight, [0, 0, 10, 10]);\n            ctx.fill();\n            ctx.stroke();\n\n            // Bottom Pipe\n            ctx.beginPath();\n            ctx.roundRect(ob.x, ob.topHeight + this.gap, this.width, canvas.height - (ob.topHeight + this.gap), [10, 10, 0, 0]);\n            ctx.fill();\n            ctx.stroke();\n        }\n    }\n};\n\n// Entity: Particles\nlet particles = [];\nfunction createParticles(x, y, count) {\n    for (let i = 0; i < count; i++) {\n        particles.push({\n            x: x,\n            y: y,\n            vx: (Math.random() - 0.5) * 5,\n            vy: (Math.random() - 0.5) * 5,\n            life: 1.0,\n            color: `hsl(${globalHue}, 100%, 70%)`\n        });\n    }\n}\n\nfunction updateAndDrawParticles() {\n    for (let i = 0; i < particles.length; i++) {\n        let p = particles[i];\n        p.x += p.vx;\n        p.y += p.vy;\n        p.life -= 0.03;\n        \n        ctx.globalAlpha = p.life;\n        ctx.fillStyle = p.color;\n        ctx.beginPath();\n        ctx.arc(p.x, p.y, 4, 0, Math.PI * 2);\n        ctx.fill();\n        ctx.globalAlpha = 1;\n\n        if (p.life <= 0) {\n            particles.splice(i, 1);\n            i--;\n        }\n    }\n}\n\n// Background Effects\nlet bgOffset = 0;\nfunction drawBackground() {\n    // Dynamic Gradient Background\n    let g = ctx.createLinearGradient(0, 0, 0, canvas.height);\n    g.addColorStop(0, `hsl(${globalHue + 20}, 30%, 10%)`);\n    g.addColorStop(1, `hsl(${globalHue}, 30%, 5%)`);\n    ctx.fillStyle = g;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    // Grid Lines for speed effect\n    ctx.strokeStyle = `hsl(${globalHue}, 50%, 20%)`;\n    ctx.lineWidth = 2;\n    bgOffset -= gameSpeed * 0.5;\n    if(bgOffset <= -50) bgOffset = 0;\n    \n    ctx.beginPath();\n    for(let i = bgOffset; i < canvas.width; i+=50) {\n        ctx.moveTo(i, 0);\n        ctx.lineTo(i, canvas.height);\n    }\n    ctx.stroke();\n}\n\n// Loop\nfunction loop() {\n    // Update Global Aesthetics\n    globalHue += 0.5;\n    frames++;\n\n    // Clear\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    drawBackground();\n\n    if (gameState === 'PLAYING') {\n        player.update();\n        obstacles.update();\n    }\n\n    obstacles.draw();\n    updateAndDrawParticles();\n    player.draw(); // Draw player last\n\n    requestAnimationFrame(loop);\n}\n\n// Controls\nfunction handleInput(e) {\n    // Prevent default scrolling on spacebar\n    if (e.code === 'Space') e.preventDefault();\n    \n    if (gameState === 'START') {\n        startGame();\n    } else if (gameState === 'PLAYING') {\n        player.jump();\n    }\n}\n\nfunction startGame() {\n    gameState = 'PLAYING';\n    document.getElementById('start-screen').classList.remove('active');\n    player.reset();\n    obstacles.reset();\n    score = 0;\n    gameSpeed = 3;\n    document.getElementById('score-display').innerText = '0';\n    player.jump();\n}\n\nfunction gameOver() {\n    gameState = 'GAMEOVER';\n    playSound('die');\n    createParticles(player.x, player.y, 30);\n    \n    if(score > highScore) {\n        highScore = score;\n        localStorage.setItem('jellyHighScore', highScore);\n    }\n    \n    document.getElementById('final-score').innerText = score;\n    document.getElementById('best-score').innerText = highScore;\n    document.getElementById('game-over-screen').classList.add('active');\n}\n\nfunction resetGame() {\n    document.getElementById('game-over-screen').classList.remove('active');\n    startGame();\n}\n\n// Event Listeners\nwindow.addEventListener('keydown', (e) => {\n    if (e.code === 'Space') handleInput(e);\n});\ncanvas.addEventListener('mousedown', handleInput);\ncanvas.addEventListener('touchstart', (e) => {\n    e.preventDefault();\n    handleInput(e);\n}, {passive: false});\n\ndocument.getElementById('start-btn').addEventListener('click', startGame);\ndocument.getElementById('restart-btn').addEventListener('click', resetGame);\n\n// Init\nplayer.reset();\nloop();"
    },
    {
      "filename": "package.json",
      "content": "{\n  \"name\": \"rainbow-jelly-flap\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A procedural generation rainbow jelly game.\",\n  \"main\": \"index.html\",\n  \"scripts\": {\n    \"start\": \"npx serve .\"\n  },\n  \"devDependencies\": {\n    \"serve\": \"^14.0.0\"\n  }\n}"
    }
  ]
}